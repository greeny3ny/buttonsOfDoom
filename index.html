<!DOCTYPE html>

	<head>
		<script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
		<script src="https://www.gstatic.com/firebasejs/5.4.2/firebase.js"></script>
		
		<title>BUTTONS OF DOOM</title>
		<link href="style.css" rel="stylesheet"/>
	</head>

	<body>
		<h1>BUTTONS 0.1</h1>
	
		<p id="test11">Craig's Buttons of Doom</p>
	
		<table id="#t1"style="width:150%" >
			<tr>
				<td>
					<table style="width:50%" border="3">
						<tr>
							<td>Tell Me Why</td>
							<td><input id="tmw" type="button" value="Click" onclick="tellMeWHY();" /></td>
						
						</tr>
						<tr>
							<td>Ayo GG</td>
							<td><input id="ayogg" type="button" value="Click" onclick="ayoGG();" /></td>
							
						</tr>
						<tr>
							<td>Butterfly Poop</td>
							<td><input id="bpoop" type="button" value="Click" onclick="butterflyPoop();" /></td>
							
						</tr>
						<tr>
							<td>Bulldozer</td>
							<td><input id="bdz" type="button" value="Click" onclick="bulldozer();" /></td>
							
						</tr>
						
						<tr>
							<td>Feel the heat</td>
							<td><input id="heat" type="button" value="Click" onclick="theheat();" /></td>
							
						</tr>

					</table>
				</td>
				<td>
					<!-- 
						rPleicjySdI - Stand by
						I9z0LvoFqHg - Happy Altspace
						
						LIVESTREAM LINK WILL NEED CHANGED WHEN OFFLINE / RESTARTED
						CHANGE IT ON FIREBASE ! :)
					--->
					<iframe id="vid" width="560" height="315" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
				</td>
			</tr>
			<tr>
				<td></td>
				<td><p id="status"> Current status : </p></td>
			</tr>
		</table>
		
	</body>
		
</html>

<script>

  var config = {
    apiKey: "AIzaSyBs6_28rLZsYzUg2S9GuhgOoLYPmhFnK0k",
    authDomain: "buttonsofdoom-be3b7.firebaseapp.com",
    databaseURL: "https://buttonsofdoom-be3b7.firebaseio.com",
    projectId: "buttonsofdoom-be3b7",
    storageBucket: "buttonsofdoom-be3b7.appspot.com",
    messagingSenderId: "186775802804"
  };

	firebase.initializeApp(config);

	const DB_REF = new Firebase("https://buttonsofdoom-be3b7.firebaseio.com");

	var offline = false;
	const DATA_TIMEOUT = 2000;
	readFirebase();
	checkOnlineStatus();
	
	function tellMeWHY(){
		document.getElementById("tmw").innerHTML = "TELL ME WHYYYYYYYYYYY";
		DB_REF.update({cont: "tmw"});
		//databasePush("tmw");
		//possible remove this function \/ \/
		setTimeout(function test(){
			document.getElementById("tmw").innerHTML = "---------------------------";
			DB_REF.update({cont: "stop"});
		},DATA_TIMEOUT);
	}
	
	function ayoGG(){
		document.getElementById("ayogg").innerHTML = "AYOOOO GG!!!";
		DB_REF.update({cont: "ayogg"});
		//databasePush("tmw");
		//possible remove this function \/ \/
		setTimeout(function test(){
			document.getElementById("ayogg").innerHTML = "---------------------------";
			DB_REF.update({cont: "stop"});
		},DATA_TIMEOUT);
	}
	
	function butterflyPoop(){
		document.getElementById("bpoop").innerHTML = "Butterfly pooop.";
		DB_REF.update({cont: "bpoop"});
		//databasePush("tmw");
		//possible remove this function \/ \/
		setTimeout(function test(){
			document.getElementById("bpoop").innerHTML = "---------------------------";
			DB_REF.update({cont: "stop"});
		},DATA_TIMEOUT);
	}
	
	function bulldozer(){
		document.getElementById("bdz").innerHTML = "Like a soldier!";
		DB_REF.update({cont: "bdz"});
		//databasePush("tmw");
		//possible remove this function \/ \/
		setTimeout(function test(){
			document.getElementById("bdz").innerHTML = "---------------------------";
			DB_REF.update({cont: "stop"});
		},DATA_TIMEOUT);
	}
	
	function theheat(){
		document.getElementById("heat").innerHTML = "Like a soldier!";
		DB_REF.update({cont: "heat"});
		//databasePush("tmw");
		//possible remove this function \/ \/
		setTimeout(function test(){
			document.getElementById("heat").innerHTML = "---------------------------";
			DB_REF.update({cont: "stop"});
		},DATA_TIMEOUT);
	}

	function readFirebase(){
		console.log("reading firebase...");
		DB_REF.child("cont").on("value", function(snapshot){
			console.log(snapshot.val());
			var st = snapshot.val(); 
			
			switch (st){
				case "tmw" : 
				document.getElementById("status").innerHTML = "Telling you why.";
				var audio = new Audio('audio/tmwhy.mp3');
				audio.volume = 0.05;
				audio.play();
				break;
				case "ayogg" : 
				document.getElementById("status").innerHTML = "She's a cat burglar.";
				var audio = new Audio('audio/ayoGG.mp3');
				audio.volume = 0.05;
				audio.play();
				break;
				case "bpoop" : 
				document.getElementById("status").innerHTML = "Stinky butterfly.";
				var audio = new Audio('audio/butterflypoop.mp3');
				audio.volume = 0.05;
				audio.play();
				break;
				case "bdz" : 
				document.getElementById("status").innerHTML = "Like a soldier!";
				var audio = new Audio('audio/likabulldozer.mp3');
				audio.volume = 0.05;
				audio.play();
				break;
				case "heat" : 
				document.getElementById("status").innerHTML = "It's damn hot in here.";
				var audio = new Audio('audio/GGMYFTH.mp3');
				audio.volume = 0.05;
				audio.play();
				break;
				default :
				document.getElementById("status").innerHTML = "Doing nothing.";
			}
			
			//document.getElementById("status").innerHTML = "Current status : " + st;
		});
	}

	function getVideo(){
		console.log("reading firebase...");
		DB_REF.child("vidSrc").on("value", function(snapshot){
			console.log(snapshot.val());
			var st = snapshot.val(); 
            var key =snapshot.val();
			document.getElementById("vid").src = "https://www.youtube.com/embed/" + st;
		});
	}
	
	function checkOnlineStatus(){
		console.log("reading firebase...");
		document.getElementById("vid").src = "https://www.youtube.com/embed/rPleicjySdI";
		readFirebase();
		getVideo();
	}
	
	
</script>